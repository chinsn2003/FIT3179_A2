{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 420,
  "title": "Primary Forest Loss",
  "data": {
    "url": "https://raw.githubusercontent.com/chinsn2003/FIT3179_A2/refs/heads/main/data/treecover_loss_in_primary_forests_2001_tropics_only__ha.csv"
  },
  "transform": [
    { "calculate": "toNumber(datum.umd_tree_cover_loss__ha)/1e6", "as": "loss" },
    { "calculate": "toNumber(datum.umd_tree_cover_loss__year)", "as": "year" },
    {"filter": "datum.year>= 2010 && datum.year<=2020"},
    { "filter": "isFinite(datum.loss) && datum.loss >= 0 && isFinite(datum.year)" },

    { "aggregate": [{"op": "sum", "field": "loss", "as": "sumLoss"}],
      "groupby": ["year"] }
  ],
  "mark": {"type": "bar"},
  "encoding": {
    "x": { "field": "year", "type": "ordinal", "title": "Year", "sort": "ascending"},
    "y": {
      "field": "sumLoss",
      "type": "quantitative",
      "title": "Tree cover loss (million ha)",
      "stack": true,
      "axis": { "format": ",.0f" }
    },
    "tooltip": [
      { "field": "year", "type": "ordinal", "title": "Year" },
      { "field": "sumLoss", "type": "quantitative", "title": "Loss (million ha)", "format": ",.2f" }
    ]
  },
  "config": {
    "axis": { "labelFontSize": 12, "titleFontSize": 12 },
    "legend": { "labelFontSize": 12, "titleFontSize": 12 }
  }
}
